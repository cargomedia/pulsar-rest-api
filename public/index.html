<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Pulsar REST API client</title>
    <link rel="stylesheet" href="/web/assets/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/web/assets/css/style.css?v=1.0">
  </head>
  <body>
    <header class="navbar navbar-static-top navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <span class="navbar-brand">Pulsar dashboard</span>
        </div>
      </div>
    </header>

    <div class="container-fluid">
      <div id="websocket-feedback" class="alert alert-danger row" role="alert">Web Socket connection was lost. Reconnecting. Please wait.</div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div id="sidebar" class="col-sm-4 col-md-3 sidebar">
          <ul id="job-list" class="nav nav-sidebar"></ul>
        </div>
        <div class="col-sm-8 col-sm-offset-4 col-md-9 col-md-offset-3">
          <h3>Command details</h3>

          <div class="row" id="job">

          </div>
        </div>
      </div>
    </div>

    <script type="text/template" id="job-list-item-template">
      <div class="panel panel-<%= statusColor %>">
        <div class="panel-heading">
          <a href="/web/job/<%= id %>"><h3 class="panel-title"><%= args.app %> <%= args.env %> <%= args.task %></h3></a>
        </div>
        <div class="panel-body">
          <table class="table">
            <tr class="id">
              <td>id</td>
              <td><%= id %></td>
            </tr>
            <tr class="status">
              <td>status</td>
              <td><%= status %></td>
            </tr>
            <tr class="created">
              <td>created</td>
              <td class="timeago" title="<%= new Date(timestamp).toISOString() %>"></td>
            </tr>
          </table>
        </div>
      </div>

    </script>

    <script type="text/template" id="job-template">
      <table class="table table-bordered table-stripped">
        <tr class="id">
          <td>id</td>
          <td><%= id %></td>
        </tr>
        <tr class="command">
          <td>command</td>
          <td><%= command %></td>
        </tr>
        <tr class="status">
          <td>status</td>
          <td><%= status %></td>
        </tr>
        <tr class="created">
          <td>created</td>
          <td class="timeago" title="<%= new Date(timestamp).toISOString() %>"></td>
        </tr>
      </table>

      <div class="well">
        <div class="progress">
          <%
          var runningClass = '';
          if('RUNNING' == status){
            runningClass = 'progress-bar-striped active';
          }
          %>
          <div class="progress-bar progress-bar-<%= statusColor %> <%= runningClass %>" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
        </div>
      </div>

      <pre class="pre-scrollable">$ <%= command %><br/><%= output %></pre>
    </script>

    <script src="/web/assets/bower_components/jquery/jquery.js"></script>
    <script src="/web/assets/bower_components/jquery.cookie/jquery.cookie.js"></script>
    <script src="/web/assets/bower_components/underscore/underscore.js"></script>
    <script src="/web/assets/bower_components/backbone/backbone.js"></script>
    <script src="/web/assets/bower_components/backbone.localStorage/backbone.localStorage.js"></script>
    <script src="/web/assets/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/web/assets/bower_components/sockjs/sockjs.min.js"></script>
    <script src="/web/assets/bower_components/jquery-timeago/jquery.timeago.js"></script>

    <script src="/web/app/models/job.js"></script>
    <script src="/web/app/collections/jobs.js"></script>
    <script src="/web/app/views/job.js"></script>
    <script src="/web/app/views/jobList.js"></script>
    <script src="/web/app/views/jobListItem.js"></script>
    <script src="/web/app/routers/router.js"></script>
  </body>
</html>
